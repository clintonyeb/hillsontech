{% include "_header.html" %} {% set $page = response.data.page %} {% set $user = response.data.payload %} {% set $message
= response.data.message %} {% set $error = response.error %}

<section id="apply">
    <div class="container">

        <h1 class="text-center">Complete your profile</h1>

        <div class="row">
            <div class="col-0 col-md-3">

            </div>
            <div class="col-12 col-md-6">

                {% if $error %}
                <div class="alert alert-warning text-center" role="alert">
                    <strong>{{$error.message}}</strong>
                </div>
                {% endif %} {% if $message %}
                <div class="alert alert-success text-center" role="alert">
                    <strong>{{ $message }}</strong>
                </div>
                {% endif %}

                <form action="/profile" method="POST" enctype="multipart/form-data">

                    <input type="hidden" name="email" value="{{$user.email}}">

                    <div class="row">
                        <div class="form-group">
                            <label for="course-type">Course type</label>
                            <select class="form-control" id="course-type" name="course-type">
                                    <option value="" selected>Choose course type</option>
                                    <option value="basic">Basic</option>
                                    <option value="advance">Advance</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <div class="form-group" id="advance">
                                <label for="adv-program">Preferred program</label>
                                <select class="form-control" id="adv-program" name="adv-program">
                                    <option value="" selected>Choose course</option>
                                    <option value="c-sharp">C# Programming</option>
                                    <option value="php">PHP Programming</option>
                                    <option value="mobile-dev">Mobile App Development</option>
                                    <option value="content-mgt">Content Management Systems</option>
                                    <option value="web-design">Website Design</option>
                                    <option value="comp-network">Computer Networking</option>
                                    <option value="comp-hardware">Computer Hardware Engineering</option>
                                    <option value="soft-eng">Software Engineering</option>
                                </select>
                            </div>
                            <div class="form-group" id="basic">
                                <label for="basic-program">Preferred program</label>
                                <select class="form-control" id="basic-program" name="basic-program">
                                    <option value="" selected>Choose course</option>
                                    <option value="intro-comp">Introduction to Computer</option>
                                    <option value="intro-soft">Introduction to Computer Softwareâ€™s</option>
                                    <option value="hard-eng">Computer Hardware Engineering</option>
                                    <option value="desk-pub">Desktop Publishing</option>
                                    <option value="ms-office-app">Microsoft Office Applications</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-6" id="prog-info">
                            <div class="form-group">
                                <label for="cost">Cost</label>
                                <input name="cost" class="form-control" id="cost" readonly>
                            </div>
                            <div class="form-group">
                                <label for="duration">Duration</label>
                                <input name="duration" class="form-control" id="duration" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="timing">Preferred class timing</label>
                        <select class="form-control" id="timing" name="timing" required>
                            <option value="" selected>Choose time</option>
                            <option value="morning">Morning</option>
                            <option value="afternoon">Afternoon</option>
                            <option value="evening">Evening</option>
                        </select>
                    </div>
                    <div class="form-group row">

                        <div class="col-sm-6">
                            <label for="gender">Gender:</label>
                            <div class="form-check">
                                <label class="form-check-label">
                                <input type="radio"  class="form-check-input" name="gender" checked id="male" value="male" >
                                Male
                            </label>
                                <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="gender" id="female" value="female" >
                                Female
                            </label>
                                <label class="form-check-label">
                                <input type="radio" class="form-check-input" name="gender" id="other" value="other" >
                                Other
                            </label>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <label for="dob" class="col-form-label">Date of birth</label>
                            <div>
                                <input class="form-control" type="date" value="2011-08-19" id="dob" name="dob">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="profession">Profession</label>
                        <select class="form-control" id="profession" name="profession" required>
                                <option value="" selected>Choose profession</option>
                                <option value="student">Student</option>
                                <option value="worker">Worker</option>
                                <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="prof-other" class="other">If other, please specify</label>
                        <input type="text" name="prof-other" class="form-control other" placeholder="..." id="prof-other">
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <textarea class="form-control" id="address" name="address" rows="4" placeholder="Contact address..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="profession">Sponsored by someone?</label>
                        <select class="form-control" id="sponsor" name="sponsor">
                                <option value="no" selected>No</option>
                                <option value="yes">Yes</option>
                        </select>
                    </div>

                    <div class="row">

                        <div class="col-1">

                        </div>
                        <div class="col-10">
                            <fieldset class="sponsor">
                                <legend>Sponsor's details</legend>
                                <div class="form-group">
                                    <label for="sponsor-name">Name</label>
                                    <input type="text" name="sponsor-name" class="form-control" id="sponsor-name">
                                </div>
                                <div class="form-group">
                                    <label for="sponsor-rel" class="sponsor">Relationship</label>
                                    <input type="text" name="sponsor-rel" class="form-control" id="sponsor-rel">
                                </div>
                                <div class="form-group">
                                    <label for="sponsor-occ" class="sponsor">Occupation</label>
                                    <input type="text" name="sponsor-occ" class="form-control" id="sponsor-occ">
                                </div>
                                <div class="form-group">
                                    <label for="sponsor-contact" class="sponsor">Contact</label>
                                    <input type="number" name="sponsor-contact" placeholder="Mobile number" class="form-control" id="sponsor-contact">
                                </div>
                            </fieldset>
                        </div>

                        <div class="col-1">

                        </div>

                    </div>

                    <div class="form-group">
                        <label for="exampleInputFile">Proof of identity</label>
                        <input type="file" size="40" class="form-control-file" id="proof" accept=".png,.jpg,.doc,.jpeg,.pdf" name="file" aria-describedby="fileHelp"
                            required>
                        <small id="fileHelp" class="form-text text-muted">
                            Please upload a <strong style="color:white;" >Valid Passport Picture</strong>
                        </small>
                    </div>

                    <button type="submit" id="submit" class="btn btn-primary btn-block">Continue to payments</button>
                </form>
            </div>
            <div class="col-0 col-md-3"></div>
        </div>

    </div>
</section>

{% include "_footer.html" %}

<script>
    $(document).ready(function () {

        const courses = {
            "adv-courses": {
                "c-sharp": {
                    "name": "C# Programming",
                    "cost": "â‚¦85,000.00",
                    "duration": "6 months"
                },
                "php": {
                    "name": "PHP Programming",
                    "cost": "â‚¦160,000.00",
                    "duration": "6 months"
                },
                "mobile-dev": {
                    "name": "Mobile App Development",
                    "cost": "â‚¦80,000.00",
                    "duration": "6 months"
                },
                "content-mgt": {
                    "name": "Content Management Systems",
                    "cost": "â‚¦250,000.00",
                    "duration": "6 months"
                },
                "web-design": {
                    "name": "Website Design",
                    "cost": "â‚¦320,000.00",
                    "duration": "6 months"
                },
                "comp-network": {
                    "name": "Computer Networking",
                    "cost": "â‚¦170,000.00",
                    "duration": "6 months"
                },
                "comp-hardware": {
                    "name": "Computer Hardware Engineering",
                    "cost": "â‚¦60,000.00",
                    "duration": "6 months"
                },
                "soft-eng": {
                    "name": "Software Engineering",
                    "cost": "â‚¦450,000.00",
                    "duration": "1 year"
                }
            },
            "basic-courses": {
                "intro-comp": {
                    "name": "Introduction to Computer",
                    "cost": "â‚¦25,000.00",
                    "duration": "3 months"
                },
                "intro-soft": {
                    "name": "Introduction to Computer Softwareâ€™s",
                    "cost": "â‚¦25,000.00",
                    "duration": "3 months"
                },
                "hard-eng": {
                    "name": "Computer Hardware Engineering",
                    "cost": "â‚¦30,000.00",
                    "duration": "3 months"
                },
                "desk-pub": {
                    "name": "Desktop Publishing",
                    "cost": "â‚¦25,000.00",
                    "duration": "3 months"
                },
                "ms-office-app": {
                    "name": "Microsoft Office Applications",
                    "cost": "â‚¦30,000.00",
                    "duration": "3 months"
                }
            }
        }

        // hide elements
        // $('.group').hide();
        $('.other').hide();
        $('.sponsor').hide();
        $('#basic').hide();
        $('#advance').hide();
        $('#prog-info').hide();


        $('#course-type').change(function () {
            $('#basic').hide();
            $('#advance').hide();
            $('#prog-info').hide();
            $('#' + $(this).val()).show();
        })

        // register events
        $('#basic-program').change(function () {
            $('#prog-info').show();
            $('#cost').val(courses['basic-courses'][$(this).val()].cost)
            $('#duration').val(courses['basic-courses'][$(this).val()].duration)
        })

        $('#adv-program').change(function () {
            $('#prog-info').show();
            $('#cost').val(courses['adv-courses'][$(this).val()].cost)
            $('#duration').val(courses['adv-courses'][$(this).val()].duration)
        })

        $('#profession').change(function () {
            $('.other').hide();
            if ($(this).val() == 'other')
                $('.other').show();
        })

        $('#sponsor').change(function () {
            $('.sponsor').hide();
            if ($(this).val() == 'yes')
                $('.sponsor').show();
        })

        $("#proof").change(function () {
            const fileHelp = $("#fileHelp");
            const size = ($("#proof")[0].files[0].size);

            if (size < 1048576) {
                fileHelp.html('<span>Image looks good</span>')
            } else {
                fileHelp.html('<span class="text-danger">File cannot exceed 1MB</span>')
                $(this).val($.data(this, 'f'));
                return false;
            }
        });
    });

</script>

</body>

</html>